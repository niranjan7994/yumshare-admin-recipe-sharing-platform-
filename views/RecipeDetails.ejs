<% title = 'Recipe Details' %>
<%- include('Navbar') %> 

<div class="container mt-5">
  <!-- Recipe Details Card -->
  <div class="p-4 border shadow rounded bg-light">
    <!-- Recipe Details Heading -->
    <div class="d-flex justify-content-between align-items-center">
      <h1>Recipe Details</h1>
      <form action="/deleterecipe/<%= recipe._id %>" method="POST" class="d-inline-block">
        <button type="submit" class="btn btn-danger" onclick="return confirmDelete()">Delete Recipe</button>
      </form>
    </div>
    <hr />

    <!-- Recipe Title -->
    <h2><%= recipe.title %></h2>

  <!-- Recipe Image -->
<div class="text-center my-4">
  <% if (recipe.image) { %>
    <img
      src="<%= recipe.image %>"
      alt="<%= recipe.title %>"
      class="img-fluid img-thumbnail w-50"
      style="max-height: 400px; object-fit: cover;"
    />
  <% } else { %>
    <p>No image available for this recipe.</p>
  <% } %>
</div>


    <!-- Ingredients -->
    <h4>Ingredients:</h4>
    <ul>
      <% recipe.ingredients.split(',').forEach(ingredient => { %>
        <li><%= ingredient.trim() %></li>
      <% }) %>
    </ul>

    <!-- Steps -->
    <h4>Steps:</h4>
    <ol>
      <% recipe.steps.split('.').forEach(step => { %>
        <% if (step.trim()) { %>
          <li><%= step.trim() %></li>
        <% } %>
      <% }) %>
    </ol>

    <!-- Cooking Time -->
    <h4>Cooking Time:</h4>
    <p><%= recipe.cookingTime %> minutes</p>

    <!-- Difficulty Level -->
    <h4>Difficulty Level:</h4>
    <p><%= recipe.difficulty %></p>

    <!-- Creator's Name -->
    <h4>Creator:</h4>
    <p><%= recipe.creatorId ? recipe.creatorId.name : 'Unknown' %></p>
  </div>
</div>


<script>
  function confirmDelete() {
    return confirm("Are you sure you want to delete this recipe?");
  }
</script>
